services:
  # Frontend — React SPA (Vite static build)
  - type: web
    runtime: static
    name: baxterlabs-static-site
    repo: https://github.com/baxterlabsai/baxterlabs-static-site
    branch: main
    buildCommand: npm run build
    staticPublishPath: ./dist
    plan: starter
    routes:
      - type: rewrite
        source: /*
        destination: /index.html

  # Backend — FastAPI API
  - type: web
    runtime: python
    name: baxterlabs-api
    repo: https://github.com/baxterlabsai/baxterlabs-static-site
    branch: main
    buildCommand: apt-get update && apt-get install -y --no-install-recommends libreoffice-writer libreoffice-impress && cd backend && pip install -r requirements.txt
    startCommand: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT
    plan: starter
    region: oregon
